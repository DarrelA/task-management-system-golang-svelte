image: alpine

before_script:
  - apk add npm
  - apk add git --no-cache

stages:
  - clone
  - build

clone repo:
  stage: clone
  script:
    - echo "Cloning Frontend Repo"
    - pwd && ls
    - git clone https://gitlab.com/lowjiewei/tms-a3.git workspace

  artifacts:
    paths:
      # saving the entire folder
      - ./workspace

build:
  stage: build
  script:
    - pwd && ls
    - cd FE_src
    - echo "Building Frontend Repo"
    - pwd && ls
    - npm install
    - npm run build
    - cd ..
    - mkdir bin
    - pwd
    - ls
    - cp -r FE_src bin
    - tar -czvf bin.tar.gz bin
  artifacts:
    paths:
      - ./bin.tar.gz
  dependencies:
    - clone repo

